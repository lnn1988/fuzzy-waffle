# 数据库索引

## 数据库索引数据结构
MongoDB：B 树
InnoDB：B+树
MyISAM：HASH

## B树 VS B+树
B 树所有节点都用来用来存数据。
![eTzXKX](https://gitee.com/lnn1988/upic1988/raw/master/uPic/eTzXKX.jpg)

B+ 树只有叶子节点有数据，同时将所有的叶子节点串起来。
![aw8DQu](https://gitee.com/lnn1988/upic1988/raw/master/uPic/aw8DQu.jpg)

## 为什么 MongoDB 和 InnoDB 不一样
B+树由于将所有的叶子节点串联了起来，可以很方便的进行范围遍历，因此可以进行很方便的range；
MongoDB 选择 B 树是因为对于非关系型数据库，每个文档是一条记录，不需要范围取值，因此采用 B 树；

## MySQL 的索引（聚集索引和辅助索引）
如果一个主键被定义了，那么这个主键就是作为聚集索引
如果没有主键被定义，那么该表的第一个唯一非空索引被作为聚集索引
如果没有主键也没有合适的唯一索引，那么innodb内部会生成一个隐藏的主键作为聚集索引
**聚集索引的数据结构是一个 b+树，存放了索引值以及真实的数据；**

辅助索引存了聚集索引，因此，使用辅助索引查到的只是聚集索引的值，获取真实的数据，需要使用查到的聚集索引值再去聚集索引的 B+树下查找。