# 数据库索引

## 数据库索引数据结构
MongoDB：B 树
InnoDB：B+树
MyISAM：HASH

## B树 VS B+树
树内的每个节点都存储数据
叶子节点之间无指针相邻
![eTzXKX](https://gitee.com/lnn1988/upic1988/raw/master/uPic/eTzXKX.jpg)

数据只出现在叶子节点
所有叶子节点增加了一个链指针
![aw8DQu](https://gitee.com/lnn1988/upic1988/raw/master/uPic/aw8DQu.jpg)

## 为什么 MongoDB 和 InnoDB 不一样
Mysql中数据遍历操作比较多，所以用B+树作为索引结构。而Mongodb是做单一查询比较多，数据遍历操作比较少，所以用B树作为索引结构。

因此，由于关系型数据库和非关系型数据的设计方式上的不同。导致在关系型数据中，遍历操作比较常见，因此采用B+树作为索引，比较合适。而在非关系型数据库中，单一查询比较常见，因此采用B树作为索引，比较合适。

## MySQL 的索引（聚集索引和辅助索引）
如果一个主键被定义了，那么这个主键就是作为聚集索引
如果没有主键被定义，那么该表的第一个唯一非空索引被作为聚集索引
如果没有主键也没有合适的唯一索引，那么innodb内部会生成一个隐藏的主键作为聚集索引
**聚集索引的数据结构是一个 b+树，存放了索引值以及真实的数据；**

辅助索引存了聚集索引，因此，使用辅助索引查到的只是聚集索引的值，获取真实的数据，需要使用查到的聚集索引值再去聚集索引的 B+树下查找。